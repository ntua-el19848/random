## Το πρόβλημα των 4 Βασιλισσών και τα ερωτήματα που ζητούνται

### **Ερώτημα 1: Αναπαράσταση του Προβλήματος ως Πρόβλημα Ικανοποίησης Περιορισμών (CSP)**

#### Απάντηση:

Το πρόβλημα των 4 βασιλισσών είναι μια παραλλαγή του γενικού προβλήματος των **n-Queens**, όπου πρέπει να τοποθετηθούν 4 βασίλισσες σε μια σκακιέρα 4x4 έτσι ώστε καμία βασίλισσα να μην απειλεί τις άλλες. Για να το αναπαραστήσουμε ως πρόβλημα ικανοποίησης περιορισμών (CSP), ακολουθούμε τα παρακάτω βήματα:

1. **Μεταβλητές**: Οι μεταβλητές που επιλέγουμε είναι οι γραμμές της σκακιέρας. Έστω ότι έχουμε τις μεταβλητές ${X_1, X_2,X_3, X_4}$, όπου η μεταβλητή ${X_i }$ αντιστοιχεί στη γραμμή ${i }$ της σκακιέρας και η τιμή της δείχνει τη στήλη στην οποία βρίσκεται η βασίλισσα σε αυτή τη γραμμή.

2. **Πεδίο Τιμών (προφανές)**: Για κάθε μεταβλητή ${X_i}$ , οι επιτρεπτές τιμές είναι οι στήλες της σκακιέρας, δηλαδή ${D(X_i) = \{1, 2, 3, 4\}}$.

3. **Περιορισμοί**:
   - **Περιορισμός στη Στήλη**: Καμία βασίλισσα δεν πρέπει να βρίσκεται στην ίδια στήλη με κάποια άλλη. Αυτό σημαίνει ότι για κάθε ζεύγος διαφορετικών γραμμών ${i}$ και ${j}$ πρέπει να ισχύει: ${X_i \neq X_j }$.
   - **Περιορισμός στις Διαγώνιες**: Καμία βασίλισσα δεν πρέπει να βρίσκεται στην ίδια διαγώνιο με κάποια άλλη. Αυτό σημαίνει ότι για κάθε ζεύγος διαφορετικών γραμμών ${i}$ και ${j}$ πρέπει να ισχύει: ${|X_i - X_j| \neq |i - j| }$.

Αυτή η αναπαράσταση εξασφαλίζει ότι καμία βασίλισσα δεν απειλεί τις υπόλοιπες, καθώς ικανοποιούνται οι παραπάνω περιορισμοί.

---

### **Ερώτημα 2: Δημιουργία Δέντρου Αναζήτησης με Forward Checking και Χρήση Ευρετικής BestFS**

#### Απάντηση:

Για να βρούμε μια λύση χρησιμοποιώντας το **forward checking** και μια ευρετική **BestFS**, ακολουθούμε τα εξής βήματα:

1. **Δημιουργία του Δέντρου Αναζήτησης**:
   - Ξεκινάμε από έναν αρχικό κόμβο όπου δεν έχουμε τοποθετήσει καμία βασίλισσα.
   - Στο κάθε επίπεδο του δέντρου, τοποθετούμε μια βασίλισσα σε μια διαθέσιμη στήλη της τρέχουσας γραμμής, τηρώντας τους περιορισμούς (στήλη και διαγώνιες).
   - Με το forward checking, κάθε φορά που τοποθετούμε μια βασίλισσα, αφαιρούμε από τον τομέα τιμών των επόμενων μεταβλητών τις θέσεις που θα παραβίαζαν κάποιον περιορισμό.
   - Αν κάποια μεταβλητή μείνει χωρίς διαθέσιμες τιμές, τότε απορρίπτουμε τον συγκεκριμένο κλάδο του δέντρου και επιστρέφουμε στον προηγούμενο κόμβο.
   
   **Tο Δέντρο Αναζήτησης - Forward Checking (το έχω "ζωγραφίσει" πλάγια)**:
   ```
	Root (Start - No Queens placed)
	├── Queen 1 at (1,1)
	│   ├── Queen 2 at (2,3) ❌ (Failure) [Step 3 IN IMAGE]
	│   ├── Queen 2 at (2,4)
	│   │   ├── Queen 3 at (3,2) ❌ (Failure) [Step 6 IN IMAGE]
	├── Queen 1 at (1,2)
	│   └── Queen 2 at (2,4)
	│       ├── Queen 3 at (3,1)
	│       │   └── Queen 4 at (4,3) ✔️ (Solution)

	other positions lead to ❌ (Failure) except the symmetrical mirror image of this one
	===========================================================
	Queen 1 at (1,4) is analogous-symmetrical to Queen 1 at (1,1) and leads to failure ❌ (Failure)
	Queen 1 at (1,3) is analogous-symmetrical to Queen 1 at (1,2) and leads to solution ✔️ (Solution)
   ```
Το δέντρο είναι συμμετρικό (αναγράφω τις συμμετρικές-ανάλογες περιπτώσεις)

Έτσι οι δύο λύσεις είναι συμμετρικές και είναι οι παρακάτω:
![enter image description here](https://i.imgur.com/b9KBxAQ.png)

2. **Ευρετική BestFS**:
   - Για να χρησιμοποιήσουμε την ευρετική **BestFS** (Best-First Search), μπορούμε να αξιολογούμε κάθε κατάσταση βάσει του αριθμού των επιτρεπόμενων θέσεων που μένουν για τις επόμενες βασίλισσες.
   - **Ευρετικό (Heuristic) - στο περίπου**: Προτιμάμε τις καταστάσεις όπου οι βασίλισσες μπορούν να τοποθετηθούν με τους λιγότερους περιορισμούς στις υπόλοιπες θέσεις, ώστε να αυξάνουμε τις πιθανότητες να ολοκληρωθεί μια έγκυρη τοποθέτηση χωρίς πολλές αποτυχίες.

3. **Εύρεση της Πρώτης Λύσης Forward Checking**:
   - Ακολουθώντας την παραπάνω διαδικασία και χρησιμοποιώντας το forward checking, καταλήγουμε στην πρώτη λύση σε 12 βήματα που φαίνονται παρακάτω: 
	 ![FORWARD_CHECKING](https://i.imgur.com/gHTqsJc.png)

---

### **Ερώτημα 3: Εφαρμογή της Τεχνικής MAC αντί για Forward Checking και Παρατηρήσεις**

#### Απάντηση:

Στο τρίτο ερώτημα, ζητείται να επαναλάβουμε τη διαδικασία χρησιμοποιώντας την τεχνική **MAC (Maintaining Arc Consistency)** αντί για το forward checking και να σχολιάσουμε την απόδοση.

1. **Τεχνική MAC**:
   - Σε αντίθεση με το forward checking, το **MAC** διατηρεί την "συνέπεια τόξων" (arc consistency) μεταξύ όλων των μεταβλητών, όχι μόνο των επόμενων μεταβλητών.
   - Κάθε φορά που τοποθετούμε μια βασίλισσα, ελέγχουμε αν παραμένει συνεπής κάθε ζεύγος μεταβλητών στο πρόβλημα, αφαιρώντας μη συνεπείς τιμές από τους τομείς των μεταβλητών.
   - Αυτό διασφαλίζει ότι αν σε κάποιο σημείο μείνει άδεια μια τιμή για κάποιο ζεύγος μεταβλητών, μπορούμε να απορρίψουμε νωρίτερα τον συγκεκριμένο κλάδο.

   **Tο Δέντρο Αναζήτησης - MAC**:
   ```
	Root (Start - No Queens placed)
	├── Queen 1 at (1,1) ❌ (Failure) [Step 2 IN IMAGE]
	├── Queen 1 at (1,2)
	│   └── Queen 2 at (2,4)
	│       ├── Queen 3 at (3,1)
	│       │   └── Queen 4 at (4,3) ✔️ (Solution)
	===========================================================

	other positions lead to ❌ (Failure) except the symmetrical mirror image of this one
	
	Queen 1 at (1,4) is analogous-symmetrical to Queen 1 at (1,1) and leads to failure ❌ (Failure)
	Queen 1 at (1,3) is analogous-symmetrical to Queen 1 at (1,2) and leads to solution ✔️ (Solution)
   ```
   
Το δέντρο είναι συμμετρικό (αναγράφω τις συμμετρικές-ανάλογες περιπτώσεις)

2. **Παρατηρήσεις για την Απόδοση και Κόστος**:
   - Η **τεχνική MAC** έχει μεγαλύτερο κόστος υπολογισμού ανά βήμα, καθώς ελέγχει τη συνέπεια σε όλα τα τόξα μεταξύ μεταβλητών και όχι μόνο σε συγκεκριμένες θέσεις, όπως το forward checking.
   - Στο συγκεκριμένο πρόβλημα των 4 βασιλισσών, το **MAC** παρουσιάσει σημαντική βελτίωση στην απόδοση (4 βήματα αντί για 12), ωστόσο το κόστος του κάθε βήματος είναι μεγαλύτερο. Στην πράξη, σε μικρά προβλήματα το κόστος διατήρησης της συνέπειας των τόξων μπορεί να υπερβεί τα οφέλη.
   - Σε μεγαλύτερα προβλήματα, η **MAC** τεχνική είναι συχνά πιο αποτελεσματική από το forward checking, καθώς αποτρέπει περισσότερες άσκοπες αναζητήσεις και βοηθά στην εξάλειψη ασυνεπών τιμών σε μεγαλύτερο εύρος του δέντρου αναζήτησης.
   - Στο πρόβλημα των 4 βασιλισσών, η διαφορά κόστους δεν είναι σημαντική και οι λύσεις με forward checking και MAC πιθανότατα θα βρεθούν σε παρόμοιο χρόνο, καθώς ο αριθμός των κόμβων και των κλάδων είναι μικρός.

3. **Εύρεση της Πρώτης Λύσης MAC**:
![MAC](https://i.imgur.com/KHe37GN.png)


Αυτά τα βρήκα και τα διάβασα από [αυτήν την δημοσίευση](https://www.researchgate.net/publication/323067430_Exhaustive_study_of_essential_constraint_satisfaction_problem_techniques_based_on_N-Queens_problem)
